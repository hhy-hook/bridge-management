<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <title>管理员人员 界面 </title>
  <link rel="stylesheet" th:href="@{/layui/css/layui.css}">
</head>
<style type="text/css">
	.bridgeImg{
		width: auto;
		height: auto;
		max-height: 100%;
		max-width: 100%;
	}
</style>
<script>
	function nofind() {
		var img = document.getElementById("headPic");
		img.src = "/upload/user/默认头像.svg";
		img.onerror = null;
	}
</script>
<body class="layui-layout-body">
<div class="layui-layout layui-layout-admin">
  <div class="layui-header">
    <div class="layui-logo">管理员</div>
    <!-- 头部区域（可配合layui已有的水平导航） -->
    <ul class="layui-nav layui-layout-right">
      <li class="layui-nav-item">
        <a href="javascript:;">
			<img th:src="@{${user.controllerImg}}" class="layui-nav-img" id="headPic" onerror="nofind()">
			<span th:text="${user.controllerName}"/>
        </a>
        <dl class="layui-nav-child">
          <dd><a th:href="@{/controller/front/c_self}">基本资料</a></dd>
          <dd><a href="">安全设置</a></dd>
        </dl>
      </li>
      <li class="layui-nav-item"><a th:href="@{/controller/exit}">退出登录</a></li>
    </ul>
  </div>

	<div class="layui-side layui-bg-black">
		<div class="layui-side-scroll">
			<!-- 左侧导航区域（可配合layui已有的垂直导航） -->
			<ul class="layui-nav layui-nav-tree"  lay-filter="test">
				<li class="layui-nav-item">
					<a class="" href="javascript:;"><img class="layui-icon" th:src="@{/picture/icon/people.png}" style="height: 25px; width: 25px ; color: white"/>&nbsp;&nbsp;工作人员</a>
					<dl class="layui-nav-child">
						<dd><a th:href="@{/controller/front/c_inspector}">巡检人员</a></dd>
					</dl>
				</li>
				<li class="layui-nav-item">
					<a th:href="@{/controller/front/c_bridge}"><img class="layui-icon" th:src="@{/picture/icon/bridge.png}" style="height: 25px; width: 25px ; color: white"/>&nbsp;&nbsp;桥梁</a>
				</li>
				<li class="layui-nav-item">
					<a href="javascript:;"><img class="layui-icon" th:src="@{/picture/icon/warn.png}" style="height: 25px; width: 25px ; color: white"/>&nbsp;&nbsp;预警</a>
					<dl class="layui-nav-child">
						<dd><a th:href="@{/controller/front/c_alert_history}">预警记录</a></dd>
					</dl>
				</li>
				<li class="layui-nav-item">
					<a href="javascript:;"><img class="layui-icon" th:src="@{/picture/icon/maintain.png}" style="height: 25px; width: 25px ; color: white"/>&nbsp;&nbsp;维护</a>
					<dl class="layui-nav-child">
						<dd><a th:href="c_maintain_advice">维护建议</a></dd>
					</dl>
				</li>
				<li class="layui-nav-item">
					<a href="javascript:;"><img class="layui-icon" th:src="@{/picture/icon/inspection.png}" style="height: 25px; width: 25px ; color: white"/>&nbsp;&nbsp;巡检</a>
					<dl class="layui-nav-child">
						<dd><a th:href="@{/controller/front/c_job}">巡检任务</a></dd>
					</dl>
				</li>
				<li class="layui-nav-item">
					<a href="javascript:;"><img class="layui-icon" th:src="@{/picture/icon/message1.png}" style="height: 30px; width: 30px ; color: white"/>&nbsp;&nbsp;消息</a>
					<dl class="layui-nav-child">
						<dd><a th:href="@{/controller/front/c_message}">全部消息</a></dd>
					</dl>
				</li>
			</ul>
		</div>
	</div>
  
  <div class="layui-body" style="background-color: #eeeeee">
    <!-- 内容主体区域 -->
	<fieldset class="layui-elem-field layui-field-title" style="margin-top: 20px;">
	  <legend>桥梁信息</legend>
	</fieldset>
	<div class="layui-fluid">
	    <div class="layui-row layui-col-space15">
			<div class="layui-col-md15">
				<div class="layui-row layui-col-space15">
					<div class="layui-card-header">
									<span class="layui-breadcrumb" lay-separator="|">
										<a id="bridgeDetail">基本数据</a>
										<a id="bridgeVision">可视化</a>
									</span>
					</div>
				</div>
			</div>
	      <div class="layui-col-md8">
	        <div class="layui-row layui-col-space15">

				<div class="layui-col-md12">
	            <div class="layui-card">
<!--	                      <div class="layui-card-header">-->
<!--	                        基本数据-->
<!--	                      </div>-->
	                      <div class="layui-card-body">
	                        <div class="layui-row layui-col-space10">
	                          <div class="layui-col-xs12 layui-col-sm4">
								  <fieldset class="layui-elem-field layui-field-title">
									  <legend>桥梁编号</legend>
									  <div class="layui-field-box" style="text-align: center">
										  <span th:text="${bridge.bridgeId}"/>
									  </div>
								  </fieldset>
	                          </div>
	                          <div class="layui-col-xs12 layui-col-sm4">
	                            <fieldset class="layui-elem-field layui-field-title">
	                              <legend>桥梁名称</legend>
									<div class="layui-field-box" style="text-align: center">
										<span th:text="${bridge.bridgeName}"/>
									</div>
	                            </fieldset>
	                          </div>
	                          <div class="layui-col-xs12 layui-col-sm4">
	                            <fieldset class="layui-elem-field layui-field-title">
	                              <legend>造价</legend>
	                              <div class="layui-field-box" style="text-align: center">
	                                100000.00 元
	                              </div>
	                            </fieldset>
	                          </div>
	                          <div class="layui-col-xs12 layui-col-sm4">
	                            <fieldset class="layui-elem-field layui-field-title">
	                              <legend>建造日期</legend>
	                              <div class="layui-field-box" style="text-align: center">
	                                2001年3月16日   浙江xxxx有限公司
	                              </div>
	                            </fieldset>
	                          </div>
	                          <div class="layui-col-xs12 layui-col-sm4">
	                            <fieldset class="layui-elem-field layui-field-title">
	                              <legend>地理位置</legend>
	                              <div class="layui-field-box" style="text-align: center">
	                                浙江省舟山市xxx镇xxx路
	                              </div>
	                            </fieldset>
	                          </div>
	                          <div class="layui-col-xs12 layui-col-sm4">
	                            <fieldset class="layui-elem-field layui-field-title">
	                              <legend>跨度与宽度</legend>
	                              <div class="layui-field-box" style="text-align: center">
										跨度：100米  宽度: 80米
	                              </div>
	                            </fieldset>
	                          </div>
	                        </div>
	                      </div>
	                    </div>
	          </div>
	          <div class="layui-col-md6">
	            <div class="layui-card">
	              <div class="layui-card-header">图片</div>
	              <div class="layui-card-body">
	                <div class="layui-carousel " id="picture" style="margin: 0 auto">
	                  <div carousel-item >
						  <div><img class="bridgeImg" th:src="@{/upload/bridge/1/bridge1.png}"></div>
						  <div><img class="bridgeImg" th:src="@{/upload/bridge/1/bridge1.jpg}"></div>
						  <div><img class="bridgeImg" th:src="@{/upload/bridge/1/bridge2.jpg}"></div>
						  <div><img class="bridgeImg" th:src="@{/upload/bridge/1/bridge3.jpg}"></div>
	                  </div>
	                </div>
	              </div>
	            </div>
	          </div>
	          <div class="layui-col-md6">
	            <div class="layui-card">
	              <div class="layui-card-header">介绍</div>
	              <div class="layui-card-body" style="height: 280px">
	                <div class="layui-carousel layadmin-carousel layadmin-backlog">
	                  <div carousel-item>
						  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
						  跨线桥为上跨式横过公路的设施， 通常设置在行人、
						  自行车和其他车辆横跨高速公路及一级公路的地点，
						  特别是交通流冲突较严重的地方，如车站、大型商业
						  中心或其他交叉口处。跨线（立交）桥 是指跨越公路
						  、铁路或城市道路等交通线路的桥。在既有线路之上
						  跨越。又分为分离式和互通式。前者只保证上下层线
						  路的车辆各自独立通行；后者能使上下层线路的车辆
						  相互通行，在平面和立面上修建复杂的迂回匝道，占
						  用很多土地。为减少噪声，多采用预应力混凝土桥
	                  </div>
	                </div>
	              </div>
	            </div>
	          </div>
	          
	        </div>
	      </div>
	      
	      <div class="layui-col-md4">
	        <div class="layui-card">
	          <div class="layui-card-header">操作</div>
	          <div class="layui-card-body layui-text">
	            <table class="layui-table">
	              <colgroup>
	                <col width="100">
	                <col>
	              </colgroup>
	              <tbody>
	                <tr>
	                  <td>桥梁名称</td>
	                  <td>
	                    <span th:text="${bridge.bridgeName}"/>
	                  </td>
	                </tr>
	                <tr>
	                  <td>操作</td>
	                  <td style="padding-bottom: 0;">
	                    <div class="layui-btn-container">
	                      <a href=""  class="layui-btn layui-btn-danger">删除</a>
	                      <a href=""  class="layui-btn">修改</a>
	                    </div>
	                  </td>
	                </tr>
	              </tbody>
	            </table>
	          </div>
	        </div>
	        
			<div class="layui-card">
				<div class="layui-card-header">预警</div>
				<div class="layui-card-body layui-text">
					预警值设置
					<br>
				  <div id="alert1" class="demo-slider"></div>
				  <br />
				  <div class="layui-btn-container">
				    <a href=""  class="layui-btn layui-btn-danger">设置并重新预警</a>
				  </div>
				</div>
			</div>
			<div class="layui-card" style="height: 227px">
				<div class="layui-card-header">
					<span style="float: left">最近一次预警结果</span>
					<span style="color: #FF5722;float: right">2021-3-31 23:05:22</span>
				</div>
				<div class="layui-card-body">
					<div id="safe" style="height: 200%"></div>
				</div>
			</div>
	      </div>
	      
	    </div>

		<div class="layui-row layui-col-space12">
			<fieldset class="layui-elem-field layui-field-title" style="margin-top: 20px;">
				<legend>监测数据</legend>
			</fieldset>
			<div class="layui-card">
				<form class="layui-form" action="">
				<div class="layui-form-item">
				<div class="layui-inline">
					<label class="layui-form-label">搜索类型</label>
					<div class="layui-input-inline">
						<select name="type" lay-verify="">
							<option value="1" selected>长时应力</option>
							<option value="2" >长时伸缩缝</option>
							<option value="3" >长时温度</option>
							<option value="4" >长时沉降</option>
							<option value="5" >短时应力</option>
							<option value="6" >短时温度</option>
							<option value="7" >短时索力</option>
						</select>
					</div>
				</div>
				<div class="layui-inline">
					<label class="layui-form-label">搜索时间</label>
					<div class="layui-input-inline">
						<input type="text" class="layui-input" id="test1">
					</div>
				</div>
				<div class="layui-inline">
					<label class="layui-form-label">搜索状态</label>
					<div class="layui-input-inline">
						<input type="text"  autocomplete="off" class="layui-input" >
					</div>
					<button class="layui-btn search-btn inline-block"  lay-filter  id="btnSearch">筛选</button>
				</div>
				</div>
				</form>
				<table class="layui-hide" id="test"></table>
			</div>
		</div>
	  </div>
	
  </div>
  
  <div class="layui-footer">
    <!-- 底部固定区域 -->
    中小型桥梁智能管养系统
  </div>
</div>
<script th:src="@{/layui/layui.js}"></script>
<script th:src="@{/layui/layui.all.js}"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts@5/dist/echarts.min.js"></script>
<script>
layui.use('slider', function(){
  var slider = layui.slider;
  //渲染
  slider.render({
    elem: '#alert1'//绑定元素
	,input: true //输入框
	,min: 0 //最小值
	,max: 100 //最大值
  });

});
</script>
<script>
layui.use('carousel', function(){
  var carousel = layui.carousel;
  //建造实例
  carousel.render({
    elem: '#picture'
    ,width: '100%' //设置容器宽度
    ,arrow: 'always' //始终显示箭头
  });
});
</script>
<script>
	function DateFormat(sjc){
		var date = new Date(sjc);
		var y = date.getFullYear();
		var m = date.getMonth()+1;
		m = m<10?'0'+m:m;
		var d = date.getDate();
		d = d<10?("0"+d):d;
		var str = y+"-"+m+"-"+d;
		return str;
	}

	var bridgeid = [[${bridge.bridgeId}]];
	//console.log(bridgeid);

	document.getElementById('bridgeDetail').href="/controller/front/c_bridge_details?bridgeId="+bridgeid;
	document.getElementById('bridgeVision').href="/controller/front/c_bridge_vision?bridgeId="+bridgeid;

	layui.use('table', function(){
		var table = layui.table;

		table.render({
			elem: '#test'
			,url:'/data/selectLongData'
			,where:{bridgeId: bridgeid}
			,title: '长时数据--应力数据'
			,cellMinWidth: 40 //全局定义常规单元格的最小宽度，layui 2.2.1 新增
			,cols: [
				[{field:'longDataStreeDate', title:'时间', fixed: 'left', unresize: true, sort: true
					,templet: function(d){
					return DateFormat(d.longDataStreeDate);
					}}
					,{field:'longDataStreeA1', title:'A1'}
					,{field:'longDataStreeA2', title:'A2'}
					,{field:'longDataStreeB1', title:'B1'}
					,{field:'longDataStreeB2', title:'B2'}
					,{field:'longDataStreeC1', title:'C1'}
					,{field:'longDataStreeC2', title:'C2'}
					,{field:'longDataStreeD1', title:'D1'}
					,{field:'longDataStreeD2', title:'D2'}
					,{field:'longDataStreeE1', title:'E1'}
					,{field:'longDataStreeE2', title:'E2'}
					,{field:'longDataStreeF1', title:'F1'}
					,{field:'longDataStreeF2', title:'F2'}
					,{field:'longDataStreeG1', title:'G1'}
					,{field:'longDataStreeG2', title:'G2'}
					,{field:'longDataStreeH1', title:'H1'}
					,{field:'longDataStreeH2', title:'H2'}]
			]
			,parseData: function (res) {
				if(res.count == 0)
				{
					return {
						'code': 201, //接口状态
						'msg': '无数据', //提示文本
						'count': 0, //数据长度
						'data': [] //数据列表，是直接填充进表格中的数组
					}
				}
			}
		});
	});
</script>
<script>
	layui.use('laydate', function(){
		var laydate = layui.laydate;

		//执行一个laydate实例
		laydate.render({
			elem: '#test1' //指定元素
		});
	});
</script>
<script type="text/javascript">
	var dom = document.getElementById("safe");

	var myChart = echarts.init(dom);
	var app = {};
	var option;

	option = {
		series: [{
			type: 'gauge',
			startAngle: 180,
			endAngle: 0,
			min: 0,
			max: 1,
			splitNumber: 8,
			axisLine: {
				lineStyle: {
					width: 6,
					color: [
						[0.25, '#FF6E76'],
						[0.5, '#FDDD60'],
						[0.75, '#58D9F9'],
						[1, '#7CFFB2']
					]
				}
			},
			pointer: {
				icon: 'path://M12.8,0.7l12,40.1H0.7L12.8,0.7z',
				length: '12%',
				width: 20,
				offsetCenter: [0, '-60%'],
				itemStyle: {
					color: 'auto'
				}
			},
			axisTick: {
				length: 12,
				lineStyle: {
					color: 'auto',
					width: 0
				}
			},
			splitLine: {
				length: 10,
				lineStyle: {
					color: 'auto',
					width: 2
				}
			},
			axisLabel: {
				color: '#464646',
				fontSize: 15,
				distance: -50,
				formatter: function (value) {
					if (value === 0.875) {
						return '优';
					}
					else if (value === 0.625) {
						return '中';
					}
					else if (value === 0.375) {
						return '良';
					}
					else if (value === 0.125) {
						return '差';
					}
				}
			},
			title: {
				offsetCenter: [0, '-20%'],
				fontSize: 30
			},
			detail: {
				fontSize: 15,
				offsetCenter: [0, '0%'],
				valueAnimation: true,
				formatter: function (value) {
					return Math.round(value * 100) + '分';
				},
				color: 'auto'
			},
			data: [{
				value: 0.70
			}]
		}]
	};

	if (option && typeof option === 'object') {
		myChart.setOption(option);
	}

</script>
</body>
</html>